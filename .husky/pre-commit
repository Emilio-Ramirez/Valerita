#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Check if CONTENT.md is in the staged files
if git diff --cached --name-only | grep -q "CONTENT.md"; then
  echo "ğŸ“ CONTENT.md has been modified"
  echo "ğŸ”„ Running content sync script..."

  # Run the sync script
  npm run sync-content

  # Check if sync was successful
  if [ $? -eq 0 ]; then
    echo "âœ… Content synced successfully"
    echo "ğŸ“¦ Staging updated i18n.js file..."

    # Stage the updated i18n.js file
    git add js/i18n.js

    echo "âœ¨ Ready to commit!"
  else
    echo "âŒ Content sync failed"
    echo "âš ï¸  Please fix errors before committing"
    exit 1
  fi
else
  echo "â„¹ï¸  CONTENT.md not modified, skipping sync"
fi
